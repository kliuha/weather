(function(){var t={5779:function(t,e,a){"use strict";var i=a(5130),n=a(6768),r=(a(4114),a(5234)),l=a(144);const s=(0,r.nY)("weatherStore",(()=>{const t=(0,l.KR)([{}]),e=(0,l.KR)(null),a=(0,l.KR)([]),i=localStorage.getItem("favorite-cities");(0,n.wB)((()=>a),(t=>{localStorage.setItem("favorite-cities",JSON.stringify(t.value.map((t=>({fullName:t.fullName,name:t.name,lat:t.lat,lon:t.lon,id:t.lat+t.lon,favorite:!0,weather:null})))))}),{deep:!0});const r=e=>{a.value.push(e),t.value=t.value.map((t=>t.id===e.id?{...t,favorite:!0}:t))},s=e=>{a.value=a.value.filter((t=>t.id!==e)),t.value=t.value.map((t=>t.id===e?{...t,favorite:!1}:t))},o=async(e,a)=>{t.value[a]=e,e.id&&await p({lon:e.lon,lat:e.lat},a)},c=()=>{t.value.push({})},u=e=>t.value[e],d=e=>{t.value.splice(e,1)},v=async()=>{try{const t=await fetch("http://www.geoplugin.net/json.gp");if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const a=await t.json();e.value={lat:a.geoplugin_latitude,lon:a.geoplugin_longitude,fullName:`${a.geoplugin_city}, ${a.geoplugin_countryName}`,name:a.geoplugin_city,id:a.lat+a.lon}}catch(t){console.error("Error:",t)}},p=async(e,i,n)=>{try{const r=await h(e);n?a.value[i]={...a.value[i],weather:r}:t.value[i]={...t.value[i],weather:r}}catch(r){throw"Error while fetching weather"}},h=async t=>{try{const{lat:e,lon:a}=t,i=await fetch(`https://api.openweathermap.org/data/2.5/forecast/?lat=${e}&lon=${a}&appid=e606a5f4d94d5c33db4b0cc73422c09a&units=metric`);return await i.json()}catch(e){throw"Error while fetching weather"}};return i&&(a.value=JSON.parse(i),a.value.forEach(((t,e)=>{p({lon:t.lon,lat:t.lat},e,!0)}))),{cities:t,favoriteCities:a,setCity:o,getWeatherData:p,getCityByInd:u,addEmptyCity:c,deleteCityByInd:d,addFavoriteCity:r,deleteFavoriteCity:s,getCityFromIP:v,userCity:e,fetchWeatherData:h}}));var o=a(973);const c={class:"nav-container container"};var u={__name:"NavPanel",setup(t){const e=(0,o.lq)(),a=(0,n.EW)((()=>"/"===e.path)),i=s(),r=()=>{i.cities.length>=5||i.addEmptyCity()};return(t,e)=>{const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("nav",null,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.bF)(i,{to:"/"},{default:(0,n.k6)((()=>e[0]||(e[0]=[(0,n.eW)("Home")]))),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(i,{to:"/favorites"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("Favorites")]))),_:1})])])]),a.value?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:r,class:"basic-button"}," Add new city ")):(0,n.Q3)("",!0)])}}},d=a(1241);const v=(0,d.A)(u,[["__scopeId","data-v-cb7c2d72"]]);var p=v,h={__name:"App",setup(t){return(t,e)=>{const a=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(p),(0,n.bF)(a)])}}};const y=h;var m=y,w=a(4232),f=a(8626);async function g(t){try{const e=await fetch(`https://nominatim.openstreetmap.org/search?city=${t}&format=json&limit=10&lang=en`);return e.json()}catch(e){throw"Error while fetching weather"}}const C=t=>t.map((t=>({fullName:t.display_name,id:t.lat+t.lon,lat:t.lat,lon:t.lon,name:t.name,weather:null,favorite:!1}))),k=["value"],b=["onClick"];var _={__name:"CityInput",props:["city","index"],emits:["toggleCityLoading"],setup(t,{emit:e}){const a=s(),i=t,r=e,o=(0,l.KR)(i.city?.fullName||""),c=(0,l.KR)(""),u=(0,l.KR)(null),d=t=>{c.value.length&&u.value&&!u.value.contains(t.target)&&(c.value=[])};(0,n.sV)((()=>{document.addEventListener("click",d)})),(0,n.hi)((()=>{document.removeEventListener("click",d)}));const v=async t=>{try{o.value=`${t.fullName}`,c.value=[],r("toggleCityLoading",!0),await a.setCity(t,i.index)}catch(e){console.log(e)}finally{r("toggleCityLoading",!1)}},p=t=>{o.value=t,h(t)},h=(0,f.debounce)((async t=>{if(t)try{const e=await g(t);c.value=C(e)}catch(e){console.log(e)}else c.value=[]}),300);return(t,e)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("input",{value:o.value,placeholder:"Enter the city",onInput:e[0]||(e[0]=t=>p(t.target.value)),class:"city-input"},null,40,k),c.value.length?((0,n.uX)(),(0,n.CE)("ul",{key:0,ref:t=>u.value=t},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.value,(t=>((0,n.uX)(),(0,n.CE)("li",{key:t.lon+t.lat,onClick:e=>v(t)},(0,w.v_)(t.fullName),9,b)))),128))],512)):(0,n.Q3)("",!0)]))}};const E=(0,d.A)(_,[["__scopeId","data-v-216f7655"]]);var D=E;const L={key:0,class:"modal-window"},x={class:"modal-content"};var T={__name:"ModalWindow",props:["show"],setup(t){return(e,a)=>t.show?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("div",x,[(0,n.RG)(e.$slots,"default")])])):(0,n.Q3)("",!0)}};const X=T;var F=X;const I=["src","alt"],R={class:"time"},W={class:"weather-element"},O={class:"weather-element"},K=["src"];var S={__name:"WeatherTimelineItem",props:["weatherData"],setup(t){const e=t,i=(0,n.EW)((()=>a(5801)(`./${e.weatherData.weatherDescription}.svg`)));return(t,r)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("img",{src:i.value,alt:e.weatherData.weatherDescription},null,8,I),(0,n.Lk)("p",R,(0,w.v_)(e.weatherData.time),1),(0,n.Lk)("div",W,[r[0]||(r[0]=(0,n.Lk)("p",{class:"weather-parameter"},"t°",-1)),(0,n.Lk)("p",null,(0,w.v_)(Math.round(e.weatherData.temp)+"°С"),1)]),(0,n.Lk)("div",O,[(0,n.Lk)("img",{class:"wind-img weather-parameter",src:a(1807)},null,8,K),(0,n.eW)(" "+(0,w.v_)((Math.round(10*e.weatherData.wind)/10).toFixed(1)+"km/h"),1)])]))}};const N=(0,d.A)(S,[["__scopeId","data-v-605c10a9"]]);var Q=N,j=a(6912);const M={class:"chart"};var P={__name:"TempChart",props:["chartTime","chartTemp"],setup(t){j.t1.register(j.ZT,j.No,j.FN,j.kc,j.hE,j.PP);const e=t,a=(0,l.KR)(null);let i=null;const r=()=>{const t=a.value.getContext("2d");i&&i.destroy(),i=new j.t1(t,{type:"line",data:{labels:e.chartTime,datasets:[{label:"Temperature throughout the day",data:e.chartTemp,fill:!1,borderColor:"#ff6f00",tension:.1}]},options:{responsive:!0,scales:{x:{title:{display:!0,text:"Time"}},y:{min:Math.round(Math.min(...e.chartTemp)-10),max:Math.round(Math.max(...e.chartTemp)+10),ticks:{stepSize:e.chartTemp.length},title:{display:!0,text:"Temperature (°C)"}}},plugins:{title:{display:!0,text:"Temperature Variation Over a Day"},tooltip:{enabled:!0},legend:{display:!0}}}})};return(0,n.sV)((()=>{e.chartTime&&e.chartTemp&&r()})),(0,n.wB)((()=>[e.chartTime,e.chartTemp]),(([t,e])=>{t&&e&&r()})),(t,e)=>((0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("canvas",{ref_key:"chartCanvas",ref:a},null,512)]))}};const A=P;var $=A;const B={class:"weather-timeline-wrapper"},U={class:"weather-timeline"};var H={__name:"WeatherInfoBlock",props:["weatherDataList","forecastType"],setup(t){const e=t,a=(0,l.KR)([]);(0,n.sV)((()=>{s()})),(0,n.wB)((()=>e.forecastType),(()=>{s()}));const i=(0,n.EW)((()=>a.value?.map((t=>t.time)))),r=(0,n.EW)((()=>a.value?.map((t=>t.temp)))),s=()=>{"daily"===e.forecastType?u(e.weatherDataList):o(e.weatherDataList)},o=t=>{const e=(new Date).getDate();a.value=[],t.slice(0,9).forEach((t=>{+t.dt_txt.slice(8,11)===+e&&a.value.push({time:t.dt_txt.slice(-8,-3),weatherState:t.weather[0].description,weatherDescription:t.weather[0].main,wind:t.wind.speed,temp:t.main.temp})}))},c=t=>({time:t.date.slice(5,11).replace("-","."),weatherState:t.weatherState[Math.floor(t.weatherState.length/2)],weatherDescription:t.weatherDescription[Math.floor(t.weatherDescription.length/2)],wind:t.wind.reduce(((t,e)=>t+e),0)/t.wind.length,temp:t.temp.reduce(((t,e)=>t+e),0)/t.temp.length}),u=t=>{const e=[];let i={},n="";t.forEach(((a,r)=>{const l=a.dt_txt.split(" ")[0];n&&n!==l?(e.push(c({...i,date:n})),i={weatherState:[a.weather[0].description],weatherDescription:[a.weather[0].main],wind:[a.wind.speed],temp:[+a.main.temp]},n=l):(n=l,i.weatherState=i.weatherState?[...i.weatherState,a.weather[0].description]:[a.weather[0].description],i.weatherDescription=i.weatherDescription?[...i.weatherDescription,a.weather[0].main]:[a.weather[0].main],i.wind=i.wind?[...i.wind,a.wind.speed]:[a.wind.speed],i.temp=i.temp?[...i.temp,+a.main.temp]:[+a.main.temp]),r===t.length-1&&e.push(c({...i,date:n}))})),a.value=e};return(t,e)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",B,[(0,n.Lk)("div",U,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(t=>((0,n.uX)(),(0,n.Wv)(Q,{weatherData:t,key:t.time,class:"weather-timeline-item"},null,8,["weatherData"])))),128))])]),(0,n.bF)($,{chartTime:i.value,chartTemp:r.value,class:"weather-chart"},null,8,["chartTime","chartTemp"])]))}};const V=H;var J=V;const Y={class:"progress progress--md"};function q(t,e){return(0,n.uX)(),(0,n.CE)("div",Y,e[0]||(e[0]=[(0,n.Lk)("div",{class:"inner"},null,-1),(0,n.Lk)("div",{class:"inner"},null,-1),(0,n.Lk)("div",{class:"inner"},null,-1)]))}const z={},G=(0,d.A)(z,[["render",q],["__scopeId","data-v-084bc1f0"]]);var Z=G;const tt={class:"card"},et={key:0,class:"city-block-data"},at={class:"city-data"},it={class:"city-title"},nt={key:0},rt=["src"],lt=["src"],st=["disabled"],ot=["disabled"];var ct={__name:"CityBlock",props:["cityData","cityIndex","isFavoriteCard","isUserCityCard"],setup(t){const e=s(),i=t,r=(0,l.KR)(i.cityData),o=(0,l.KR)(!1),c=(0,l.KR)(!1),u=(0,l.KR)(!1),d=(0,l.KR)("hourly"),v=t=>{u.value=t},p=(0,n.EW)((()=>i.cityData.id&&!e.favoriteCities.some((t=>t.id===i.cityData.id)))),h=()=>{o.value=!1,e.cities.length<2||e.deleteCityByInd(i.cityIndex)},y=()=>{e.favoriteCities.length>=5?c.value=!0:e.addFavoriteCity(i.cityData)},m=()=>{e.deleteFavoriteCity(i.cityData.id)};return(e,l)=>((0,n.uX)(),(0,n.CE)("div",tt,[t.isFavoriteCard||t.isUserCityCard?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",et,[(0,n.bF)(D,{city:r.value,index:t.cityIndex,toggleCityLoading:v},null,8,["city","index"]),t.cityIndex>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:l[0]||(l[0]=()=>o.value=!0),class:"basic-button"}," Delete city block ")):(0,n.Q3)("",!0)])),u.value?((0,n.uX)(),(0,n.Wv)(Z,{key:1,class:"loader"})):((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.Lk)("div",at,[(0,n.Lk)("p",it,[t.isUserCityCard?((0,n.uX)(),(0,n.CE)("span",nt,"Your location: ")):(0,n.Q3)("",!0),(0,n.Lk)("span",null,(0,w.v_)(i.cityData?.fullName||""),1)]),p.value&&!t.isUserCityCard?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:y},[(0,n.Lk)("img",{class:"star",src:a(5540)},null,8,rt)])):(0,n.Q3)("",!0),t.isFavoriteCard||i.cityData.id&&!p.value&&!t.isUserCityCard?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:m},[(0,n.Lk)("img",{class:"star",src:a(8793)},null,8,lt)])):(0,n.Q3)("",!0)]),i.cityData.id?((0,n.uX)(),(0,n.CE)("button",{key:0,disabled:"hourly"===d.value,class:"toggle-btn basic-button",onClick:l[1]||(l[1]=()=>d.value="hourly")}," Today ",8,st)):(0,n.Q3)("",!0),i.cityData.id?((0,n.uX)(),(0,n.CE)("button",{key:1,disabled:"daily"===d.value,class:"basic-button toggle-btn toggle-btn_right",onClick:l[2]||(l[2]=()=>d.value="daily")}," 5 days ",8,ot)):(0,n.Q3)("",!0),t.cityData?.id&&!t.cityData?.weather?((0,n.uX)(),(0,n.Wv)(Z,{key:2,class:"loader"})):(0,n.Q3)("",!0),t.cityData?.weather?((0,n.uX)(),(0,n.Wv)(J,{key:3,forecastType:d.value,weatherDataList:t.cityData?.weather?.list},null,8,["forecastType","weatherDataList"])):(0,n.Q3)("",!0),(0,n.bF)(F,{show:o.value},{default:(0,n.k6)((()=>[l[5]||(l[5]=(0,n.Lk)("p",null,"Are you sure you want to delete this weather block?",-1)),(0,n.Lk)("button",{onClick:l[3]||(l[3]=()=>o.value=!1),class:"basic-button"}," Cancel "),(0,n.Lk)("button",{onClick:h,class:"basic-button basic-button-right"}," Ok ")])),_:1},8,["show"]),(0,n.bF)(F,{show:c.value},{default:(0,n.k6)((()=>[l[6]||(l[6]=(0,n.Lk)("p",null," To add a city, delete some city from your favorites, because there are a maximum of 5 favorite cities ",-1)),(0,n.Lk)("button",{onClick:l[4]||(l[4]=()=>c.value=!1),class:"basic-button"}," Ok ")])),_:1},8,["show"])],64))]))}};const ut=(0,d.A)(ct,[["__scopeId","data-v-09e05ebf"]]);var dt=ut;const vt={class:"container"};var pt={__name:"HomePage",setup(t){const e=s();return(0,n.KC)((async()=>{await e.getCityFromIP();const t=await e.fetchWeatherData({lat:e.userCity.lat,lon:e.userCity.lon});e.userCity={...e.userCity,weather:t}})),(t,a)=>((0,n.uX)(),(0,n.CE)("div",vt,[(0,l.R1)(e)?.userCity?.weather?((0,n.uX)(),(0,n.Wv)(dt,{key:0,"city-data":(0,l.R1)(e).userCity,"city-index":0,"is-user-city-card":!0},null,8,["city-data"])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,l.R1)(e).cities,((t,e)=>((0,n.uX)(),(0,n.Wv)(dt,{"city-data":t,key:e,"city-index":e},null,8,["city-data","city-index"])))),128))]))}};const ht=pt;var yt=ht;const mt={class:"container"},wt={key:0,class:"card"};var ft={__name:"FavoritsPage",setup(t){const e=s();return(t,a)=>((0,n.uX)(),(0,n.CE)("div",mt,[(0,l.R1)(e).favoriteCities.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",wt," The weather for your selected cities will be displayed here. ")),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,l.R1)(e).favoriteCities,((t,e)=>((0,n.uX)(),(0,n.Wv)(dt,{"city-data":t,key:e,"city-index":e,"is-favorite-card":!0},null,8,["city-data","city-index"])))),128))]))}};const gt=ft;var Ct=gt;const kt=[{path:"/",name:"Home",component:yt},{path:"/favorites",name:"Favorites",component:Ct}],bt=(0,o.aE)({history:(0,o.LA)(),routes:kt});var _t=bt;(0,i.Ef)(m).use((0,r.Ey)()).use(_t).mount("#app")},5801:function(t,e,a){var i={"./Clear.svg":876,"./Clouds.svg":3595,"./Rain.svg":8883,"./Snow.svg":8248,"./fill_star.svg":8793,"./stroke_star.svg":5540,"./wind.svg":1807};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id=5801},876:function(t,e,a){"use strict";t.exports=a.p+"img/Clear.dc197208.svg"},3595:function(t,e,a){"use strict";t.exports=a.p+"img/Clouds.ec17e076.svg"},8883:function(t,e,a){"use strict";t.exports=a.p+"img/Rain.93eec289.svg"},8248:function(t,e,a){"use strict";t.exports=a.p+"img/Snow.e25573e8.svg"},8793:function(t,e,a){"use strict";t.exports=a.p+"img/fill_star.351b5ccf.svg"},5540:function(t,e,a){"use strict";t.exports=a.p+"img/stroke_star.6c9264c2.svg"},1807:function(t,e,a){"use strict";t.exports=a.p+"img/wind.b6b6236c.svg"}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,function(){var t=[];a.O=function(e,i,n,r){if(!i){var l=1/0;for(u=0;u<t.length;u++){i=t[u][0],n=t[u][1],r=t[u][2];for(var s=!0,o=0;o<i.length;o++)(!1&r||l>=r)&&Object.keys(a.O).every((function(t){return a.O[t](i[o])}))?i.splice(o--,1):(s=!1,r<l&&(l=r));if(s){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[i,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/"}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,l=i[0],s=i[1],o=i[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(o)var u=o(a)}for(e&&e(i);c<l.length;c++)r=l[c],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(u)},i=self["webpackChunkweather"]=self["webpackChunkweather"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(5779)}));i=a.O(i)})();
//# sourceMappingURL=app.1145c686.js.map